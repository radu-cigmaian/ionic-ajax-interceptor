!function(){"use strict";angular.module("ionic-ajax-interceptor",["ionic"])}(),function(){"use strict";angular.module("ionic-ajax-interceptor",["ionic"])}(),function(t){"use strict";t.provider("AjaxInterceptor",["$httpProvider",function(t){var e={title:"Error",defaultMessage:"Unknown error",authorizationHeader:"authorization",authorizationToken:null,stateChangeError:!0,fallbackIp:null,errHandler:{}};return{config:function(a){angular.extend(e,a),t.interceptors.push(["$rootScope","$q","$injector","Constants",function(t,a,n,r){return{request:function(a){return t.$broadcast("loading:show"),e.authorizationToken&&(a.headers[e.authorizationHeader]=e.authorizationToken),a.headers["App-Version"]=r.version,a},requestError:function(e){return t.$broadcast("loading:hide"),a.reject(e)},response:function(a){return t.$broadcast("loading:hide"),a.headers()&&a.headers()[e.authorizationHeader]&&a.headers()[e.authorizationHeader]!=e.authorizationToken&&(e.authorizationToken=a.headers()[e.authorizationHeader],e.authChangeCallback&&e.authChangeCallback(e.authorizationToken)),a},responseError:function(r){if(t.$broadcast("loading:hide"),0==r.status||r.status==-1||r.status>=500){var o=r.config.url.split("/");o[2]!=e.fallbackIp?(o[2]=e.fallbackIp,e.svdUrl=r.config.url,r.config.url=o.join("/")):(r.config.url=e.svdUrl,Number(r.status)<500?alert("Va rugam verificati conexiunea la internet, aplicatia nu s-a putut conecta la server."):alert("Va rugam verificati conexiunea la internet, aplicatia nu s-a putut conecta la server. \nStatus:"+r.status));var i=n.get("$http");return i(r.config)}return e.errHandler[r.status]?(e.errHandler[r.status](r),{}):a.reject(r)}}}])},$get:["$ionicPopup","$ionicLoading","$rootScope",function(t,a,n){var r=0,o=function(){0===r&&a.show({content:"Loading",animation:"fade-in",showBackdrop:!1,maxWidth:200,showDelay:0}),r++},i=function(){r--,0==r?a.hide():r<0&&(r=0)};return{run:function(){e.stateChangeError&&n.$on("$stateChangeError",function(a,n,r,o,i,u){t.alert({title:e.title,content:u.message||e.defaultMessage})}),n.$on("loading:show",function(){o()}),n.$on("loading:hide",function(){i()})},setErrorHandler:function(t){e.errHandler=t},setAuthorizationToken:function(t){e.authorizationToken=t},setAuthChangeCallback:function(t){e.authChangeCallback=t},getAuthorizationToken:function(){return e.authorizationToken},showLoading:function(){o()},hideLoading:function(){i()}}}]}}])}(angular.module("ionic-ajax-interceptor")),function(t){"use strict";var e="iHttp_";t.factory("AjaxService",["$http","$q",function(t,a){return{config:function(t){t.hasOwnProperty(prefix)&&(e=t.prefix)},http:function(n){var r,o;if(n.iCache){r=e,o=n.iCache.expires,r+=n.iCache.hasOwnProperty("key")?n.iCache.key:n.url;var i=localStorage.getItem(r);if(i){var u=JSON.parse(i);if(!u.timestamp||u.timestamp>(new Date).getTime())return a.resolve({data:u.data})}delete n.iCache}var c=a.defer();return t(n).then(function(t){if(r&&t.data){var e=JSON.stringify({timestamp:o,data:t.data});localStorage.setItem(r,e)}c.resolve(t)},function(t){c.reject(t)}),c.promise},clearCache:function(){for(var t in localStorage)localStorage.hasOwnProperty(t)&&0==t.indexOf(e)&&localStorage.removeItem(t)}}}])}(angular.module("ionic-ajax-interceptor"));